document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("publication-badge-filters");if(!e)return;const t=Array.from(document.querySelectorAll(".bibliography > li")),a=new Map;if(t.forEach(e=>{const t=e.querySelector(".publication-entry");if(!t)return;const l=t.dataset.badge,s=t.dataset.badgeLabel;l&&s&&!a.has(l)&&a.set(l,s)}),0===a.size)return void e.classList.add("unloaded");const l=document.createElement("ul");l.className="tab-nav",e.appendChild(l);const s=(e,t,a=!1)=>{const l=document.createElement("li"),s=document.createElement("button");return s.type="button",s.className="button badge-filter",a?(s.classList.add("active"),s.setAttribute("aria-pressed","true")):s.setAttribute("aria-pressed","false"),s.dataset.filter=t,s.textContent=e,l.appendChild(s),l},r=["Computational Design","Manufacturing","Education"],n=Array.from(a.entries()).filter(e=>r.includes(e[1])).sort((e,t)=>r.indexOf(e[1])-r.indexOf(t[1]));l.appendChild(s("All","all",!0)),n.forEach(([e,t])=>{l.appendChild(s(t,e))});const o=t=>{e.querySelectorAll("button.badge-filter").forEach(e=>{const a=e===t;e.classList.toggle("active",a),e.setAttribute("aria-pressed",a?"true":"false")})},i=e=>e.classList.contains("filtered-out")||e.classList.contains("unloaded"),c=()=>{document.querySelectorAll("ol.bibliography").forEach(e=>{const t=Array.from(e.querySelectorAll(":scope > li")),a=t.length>0&&t.every(e=>i(e)),l=e.previousElementSibling,s=(e,t)=>{e&&e.classList.toggle("filtered-out",t)};a?(e.classList.add("filtered-out"),s(l,!0)):(e.classList.remove("filtered-out"),s(l,!1))})},d=e=>{t.forEach(t=>{const a=t.querySelector(".publication-entry"),l=a?a.dataset.badge:"",s="all"===e||l&&l===e;t.classList.toggle("filtered-out",!s)}),c()};e.addEventListener("click",e=>{const t=e.target.closest("button[data-filter]");t&&(o(t),d(t.dataset.filter))}),d("all")});